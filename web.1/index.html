<!DOCTYPE html>
<html>
    <head>
        <title>Fortified Studio</title>
    </head>
    <body>
        <div id="profiles"></div>
    </body>
    <script id="profileTemplate" type="text/template">
        <div class="profile" style="margin-bottom: 21px;">
            <div class="info">
                <div class="name">
                    <%= name %>
                </div>
                <div class="title">
                    <%= title %>
                </div>
                <div class="background">
                    <%= background %>
                </div>
            </div>
        </div>
    </script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/backbone.js/1.3.3/backbone-min.js"></script>
    <script>

$(() => {
    class Profile extends Backbone.Model {}

    class ProfileList extends Backbone.Collection {
        get model() {return Profile}
        get url() {return 'profiles.json'}
    } 

    class ProfileView extends Backbone.View {
        get el() {return "#profiles"}
        get template() {return _.template($('#profileTemplate').html())}
        render(eventName) {
            this.model.models.forEach((profile) => {
                let profileTemplate = this.template(profile.toJSON())
                $(this.el).append(profileTemplate)
            })
            return this
        }
    }

    let profiles = new ProfileList()
    let profilesView = new ProfileView({model: profiles})
    profiles.fetch({
        success: () => profilesView.render()
    })

})

    </script>
</html>
